$NetBSD: patch-aa,v 1.1.1.1 2007/06/05 05:56:42 rillig Exp $

--- Makefile.orig	2007-04-22 10:39:42.000000000 -0500
+++ Makefile
@@ -1,19 +1,19 @@
 # The directory where all the bouml files will be installed, you
 # can change it for instance because you don't have root permission
-BOUML_LIB = /usr/lib/bouml
+BOUML_LIB = ${PREFIX}/lib/bouml
 
 # The directory where the bouml shell script will be installed, you
 # can change it for instance because you don't have root permission
-BOUML_DIR = /usr/bin
+BOUML_DIR = ${PREFIX}/bin
 
 # The directory containing bouml.desktop
 # The copy is not done if you comment the definition
-BOUML_DESKTOP_DIR = /usr/share/applications
+BOUML_DESKTOP_DIR = ${PREFIX}/share/applications
 
 # The directories containing the bouml icons are
 # <BOUML_ICONS_PREFIX_DIR>/<size>x<size>/apps
 # The copy is not done if you comment the definition
-BOUML_ICONS_PREFIX_DIR = /usr/share/icons/hicolor
+BOUML_ICONS_PREFIX_DIR = ${PREFIX}/share/icons/hicolor
 
 # for packaging purpose, useless by default
 # DESTDIR = 
@@ -21,8 +21,6 @@ BOUML_ICONS_PREFIX_DIR = /usr/share/icon
 # uncomment if needed
 # MAKE = make
 
-QMAKE=qmake
-
 SRC_DIRS = src \
 	src/CppGenerator \
 	src/CppReverse \
@@ -88,19 +86,19 @@ clean:
 	for i in $(SRC_DIRS) $(PLUGOUT_DIRS); do if [ -d $$i ]; then (cd $$i ; $(MAKE) clean; rm -f Makefile; ) || exit 1 ; fi; done
 
 install:
-	mkdir -p "$(DESTDIR)$(BOUML_LIB)"
-	mkdir -p "$(DESTDIR)$(BOUML_DIR)"
+	${BSD_INSTALL_LIB_DIR} "$(DESTDIR)$(BOUML_LIB)"
+	${BSD_INSTALL_PROGRAM_DIR} "$(DESTDIR)$(BOUML_DIR)"
 	if test -n "$(BOUML_ICONS_PREFIX_DIR)" ; \
 	then \
 		for i in 16 32 48 64; do \
-			mkdir -p "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps"; \
-			cp bouml.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/bouml.png"; \
-			cp projectControl.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectControl.png"; \
-			cp projectSynchro.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectSynchro.png"; \
+			${BSD_INSTALL_DATA_DIR} "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps"; \
+			${BSD_INSTALL_DATA} bouml.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/bouml.png"; \
+			${BSD_INSTALL_DATA} projectControl.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectControl.png"; \
+			${BSD_INSTALL_DATA} projectSynchro.$$i.png "$(DESTDIR)$(BOUML_ICONS_PREFIX_DIR)/$$i"x"$$i/apps/projectSynchro.png"; \
 		done \
 	fi
-	for i in $(PROGS); do cp -p $$i "$(DESTDIR)$(BOUML_LIB)" ; done
-	cd plugouts ; tar cf - empty genpro html rose singleton cpp_utilities xmi xmi2 xmi2import sm_generator usecase_wizard sort FileControl deploy GlobalChange | (cd $(DESTDIR)$(BOUML_LIB); tar xf -)
+	for i in $(PROGS); do ${BSD_INSTALL_PROGRAM} $$i "$(DESTDIR)$(BOUML_LIB)" ; done
+	cd plugouts ; pax -rw -pp -pm empty genpro html rose singleton cpp_utilities xmi xmi2 xmi2import sm_generator usecase_wizard sort FileControl deploy GlobalChange $(DESTDIR)$(BOUML_LIB)
 	echo "#!/bin/sh" >$(DESTDIR)$(BOUML_DIR)/bouml
 	echo "PATH=$(BOUML_LIB):$$"PATH >>$(DESTDIR)$(BOUML_DIR)/bouml
 	echo "exec $(BOUML_LIB)/bouml \"$$"@"\"" >>$(DESTDIR)$(BOUML_DIR)/bouml
@@ -109,7 +107,8 @@ install:
 	cd $(DESTDIR)$(BOUML_DIR) ; rm -f projectSynchro ; ln -s $(BOUML_LIB)/projectSynchro
 	if test -n "$(BOUML_DESKTOP_DIR)" ; \
 	then \
-		mkdir -p "$(DESTDIR)$(BOUML_DESKTOP_DIR)" ; \
+		\
+		${BSD_INSTALL_DATA_DIR} "$(DESTDIR)$(BOUML_DESKTOP_DIR)" ; \
 		echo "[Desktop Entry]" > "$(DESTDIR)$(BOUML_DESKTOP_DIR)/bouml.desktop" ; \
 		echo "Encoding=UTF-8" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/bouml.desktop" ; \
 		echo "Name=BOUML" >> "$(DESTDIR)$(BOUML_DESKTOP_DIR)/bouml.desktop" ; \
