$NetBSD: patch-ad,v 1.1 2004/01/21 16:26:37 cube Exp $

--- src/dt_password.c.orig	2003-11-03 22:07:57.000000000 +0100
+++ src/dt_password.c
@@ -45,6 +45,15 @@
 #include <openssl/md5.h>
 #include <openssl/md4.h>
 #include <openssl/sha.h>
+#include <openssl/opensslv.h>
+#if OPENSSL_VERSION_NUMBER >= 0x00907000L
+# define des_fcrypt		DES_fcrypt
+# define des_cblock		DES_cblock
+# define des_set_odd_parity	DES_set_odd_parity
+# define des_set_key_unchecked(key,schedule)	DES_set_key_unchecked(key, &(schedule))
+# define des_ecb_encrypt(input, output, ks, enc)	DES_ecb_encrypt(input, output, &(schedule), enc)
+# define des_key_schedule	DES_key_schedule
+#endif
 #endif /* defined(HAVE_LIBCRYPTO) */
 
 #include "common.h"
