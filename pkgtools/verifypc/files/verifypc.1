.\" $NetBSD: verifypc.1,v 1.1.1.1 2005/10/01 12:56:51 jmmv Exp $
.\"
.\" verifypc - Sanity check package dependencies according to pkg-config
.\" Copyright (c) 2005 Julio M. Merino Vidal <jmmv@NetBSD.org>
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\" 3. Neither the name of author nor the names of its contributors may
.\"    be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd October 1, 2005
.Dt VERIFYPC 1
.Os
.Sh NAME
.Nm verifypc
.Nd sanity check package dependencies according to pkg-config
.Sh SYNOPSIS
.Nm
.Sh DESCRIPTION
.Nm
is a tool that sanity checks the dependencies of a package based on the
results of a successful build, assuming the package uses
.Xr pkg-config 1
to detect its dependencies.
It will warn you if the configuration script requests an uninstalled or
unavailable package (not specified as a direct dependency) or if the
requested package does not match the version specification in the
packages' dependencies.
.Pp
.Nm
has to be run within a package directory after that package has
been successfully built.
Usually, a
.Sq make configure
is enough, but it is recommended to run a full build to also catch calls to
.Xr pkg-config 1
in the build phase.
.Pp
In order to do its checks,
.Nm
relies on a log file generated by
.Xr pkg-config 1 ;
this log is stored inside the work directory and is automatically generated
by pkgsrc assuming that your installed
.Xr pkg-config 1
binary is newer than 0.19nb1.
The tool will return an error if the log file does not exist.
.Sh RETURN VALUES
.Nm
exits 0 if all dependencies are correctly satisfied by the package or 1 if
there were any errors.
.Sh ENVIRONMENT
The following environment variables are honored:
.Bl -tag
.It Ev MAKE
Path to the
.Xr make 1
utility used to parse package make files.
Defaults to
.Pa @MAKE@ .
.It Ev VERIFYPC_IGNORE
White-space separated list of pkg-config package names that this tool
will ignore if they were not found.
Useful to shut up warnings for packages that are not yet in pkgsrc, such as
X11 pkg-config files.
Defaults to nothing.
.El
.Sh SEE ALSO
.Xr pkg-config 1
.Sh HISTORY
The
.Nm
utility first appeared in pkgsrc-2005Q4.
.Sh AUTHORS
.An Julio M. Merino Vidal Aq jmmv@NetBSD.org
