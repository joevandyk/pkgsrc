# $NetBSD: Makefile,v 1.18 2006/04/13 18:23:38 jlam Exp $
#

DISTNAME=		pv-0.9.6
CATEGORIES=		sysutils
MASTER_SITES=		http://www.ivarch.com/programs/sources/
MASTER_SITES+=		${MASTER_SITE_SOURCEFORGE:=pipeviewer/}

MAINTAINER=		pkgsrc-users@NetBSD.org
HOMEPAGE=		http://www.ivarch.com/programs/pv.shtml
COMMENT=		Monitor the progress of data through a pipeline

GNU_CONFIGURE=		yes
USE_TOOLS+=		gmake msgfmt
USE_PKGLOCALEDIR=	yes
INFO_FILES=		# PLIST

# Don't gzip the installed info file and man pages.
CONFIGURE_ENV+=		DO_GZIP=${TOOLS_CMD.true}

DOCDIR=			${PREFIX}/share/doc/pv
INSTALLATION_DIRS=	${DOCDIR}

# Grab list of files to install from the PLIST.
post-install:
	dir=${DOCDIR:S/^${PREFIX}\///:Q}; cd ${WRKSRC}/doc;		\
	${GREP} "^$$dir/" ${PKGDIR}/PLIST | ${SED} "s|^$$dir/||" |	\
	while read file; do						\
		test ! -f "$$file" ||					\
			${INSTALL_DATA} "$$file" ${PREFIX}/$$dir;	\
	done
	${INSTALL_DATA} ${WRKSRC}/README ${DOCDIR}

.include "../../devel/gettext-lib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
