$NetBSD: patch-aa,v 1.3 2003/11/16 14:01:20 agc Exp $

--- configure.orig	Sun Nov  9 21:44:24 2003
+++ configure	Sun Nov  9 21:45:58 2003
@@ -4899,16 +4899,16 @@
 
 fi
 
-echo "$as_me:$LINENO: checking for towupper" >&5
-echo $ECHO_N "checking for towupper... $ECHO_C" >&6
-if test "${ac_cv_func_towupper+set}" = set; then
+echo "$as_me:$LINENO: checking for wcsxfrm" >&5
+echo $ECHO_N "checking for wcsxfrm... $ECHO_C" >&6
+if test "${ac_cv_func_wcsxfrm+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char towupper (); below.  */
+    which can conflict with char wcsxfrm (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -4916,7 +4916,7 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char towupper ();
+char wcsxfrm ();
 char (*f) ();
 
 #ifdef F77_DUMMY_MAIN
@@ -4931,10 +4931,10 @@
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_towupper) || defined (__stub___towupper)
+#if defined (__stub_wcsxfrm) || defined (__stub___towupper)
 choke me
 #else
-f = towupper;
+f = wcsxfrm;
 #endif
 
   ;
@@ -4953,17 +4953,17 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_towupper=yes
+  ac_cv_func_wcsxfrm=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-ac_cv_func_towupper=no
+ac_cv_func_wcsxfrm=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_func_towupper" >&5
-echo "${ECHO_T}$ac_cv_func_towupper" >&6
-if test $ac_cv_func_towupper = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_func_wcsxfrm" >&5
+echo "${ECHO_T}$ac_cv_func_wcsxfrm" >&6
+if test $ac_cv_func_wcsxfrm = yes; then
   cat >>confdefs.h <<\_ACEOF
 #define SP_HAVE_WCHAR 1
 _ACEOF
